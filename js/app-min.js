class UI{constructor(){this.store=document.getElementById("store-items"),this.cart=document.getElementById("cart"),this.confirm=document.getElementById("confirmation"),this.cartInfo=document.getElementById("cart-info"),this.total=document.querySelector(".cart-total-container"),this.itemList=[],this.itemID=2}filterStore(t){if("all"===t)for(let t=0;t<this.store.childElementCount;t++)this.store.children[t].classList.remove("hide"),this.store.children[t].classList.add("show");else for(let e=0;e<this.store.childElementCount;e++)this.store.children[e].dataset.item===t?(this.store.children[e].classList.remove("hide"),this.store.children[e].classList.add("show")):(this.store.children[e].classList.remove("show"),this.store.children[e].classList.add("hide"))}showCart(){this.cart.classList.toggle("show-cart")}addToCart(t){let e=t.children[0].children[0].src,i=e.indexOf("img")+3,n=e.slice(i);const s={};s.id=t.id,s.img=`./img-cart${n}`,s.name=t.children[0].nextElementSibling.children[0].children[0].textContent;let r=t.children[0].nextElementSibling.children[0].children[1].textContent;s.price=r.slice(1).trim();const c=document.createElement("div");c.id=s.id,c.classList.add("cart-item","d-flex","justify-content-between","text-capitalize","my-3"),c.innerHTML=`\n    <img src="${s.img}" class="img-fluid rounded-circle" id="item-img" alt="">\n    <div class="item-text">\n      <p id="cart-item-title" class="font-weight-bold mb-0">${s.name}</p>\n      <span>$</span>\n      <span id="cart-item-price" class="cart-item-price" class="mb-0">${s.price}</span>\n    </div>\n    <a id='cart-item-remove' class="cart-item-remove">\n      <i class="fas fa-trash"></i>\n    </a>\n    `,this.cart.insertBefore(c,this.total),this.confirm.classList.add("show-confirmation"),setTimeout(()=>{this.confirm.classList.remove("show-confirmation")},4e3),this.cartInfo.classList.add("pink-cart-btn"),setTimeout(()=>{this.cartInfo.classList.remove("pink-cart-btn")},4e3),showTotals()}removeFromCart(t){this.cart.removeChild(t),showTotals()}removeAll(){let t=this.cart.childElementCount-2;for(let e=0;e<t;e++)setTimeout(()=>{this.cart.children[e].classList.add("empty-cart")},50*e);setTimeout(()=>{for(;this.cart.childElementCount>2;)this.cart.removeChild(this.cart.children[0]);showTotals(),this.showCart()},50*t)}}function showTotals(){const t=[];document.querySelectorAll(".cart-item-price").forEach(e=>{t.push(parseFloat(e.textContent))});const e=t.reduce((t,e)=>t+e,0);document.getElementById("cart-total").textContent=e.toFixed(2),document.querySelector(".item-total").textContent=e.toFixed(2),document.getElementById("item-count").textContent=t.length}function eventListeners(){const t=document.querySelectorAll(".filter-btn"),e=document.getElementById("cart"),i=document.getElementById("cart-info"),n=document.querySelectorAll(".store-item-icon"),s=document.getElementById("clear-cart"),r=new UI;t.forEach(t=>{t.addEventListener("click",t=>{r.filterStore(t.target.dataset.filter)})}),i.addEventListener("click",t=>{(t.target.classList.contains("cart-info")||t.target.parentElement.classList.contains("cart-info")||t.target.parentElement.parentElement.classList.contains("cart-info"))&&r.showCart()}),n.forEach(t=>{t.addEventListener("click",e=>{(e.target.parentElement.classList.contains("store-item-icon")||e.target.classList.contains("store-item-icon"))&&r.addToCart(t.parentElement.parentElement)})}),e.addEventListener("click",t=>{r.removeFromCart(t.target.parentElement.parentElement)}),s.addEventListener("click",()=>{r.removeAll()})}document.addEventListener("DOMContentLoaded",()=>{showTotals(),eventListeners()});